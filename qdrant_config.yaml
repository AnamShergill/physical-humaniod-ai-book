# Qdrant Vector Database Configuration for Physical AI Book
# Optimized for RAG (Retrieval Augmented Generation) system

service:
  host: 0.0.0.0
  port: 6333
  # Enable HTTPS in production
  enable_tls: false
  # CORS settings for frontend access
  cors_allow_origin:
    - "https://physical-ai-book.vercel.app"
    - "http://localhost:3000"

storage:
  # Storage path for vectors
  storage_path: "/qdrant/storage"
  # Snapshot settings
  snapshots_path: "/qdrant/snapshots"
  # Performance optimization
  performance:
    max_optimization_threads: 2
    max_indexing_threads: 2

# Collections configuration for textbook content
collections:
  textbook_lessons:
    # Vector dimensions for sentence embeddings (using models like all-MiniLM-L6-v2)
    vector_size: 384
    distance: Cosine
    # Enable payload indexing for metadata search
    payload_indexing:
      on_disk: false
    # HNSW indexing for fast similarity search
    hnsw_config:
      m: 16
      ef_construct: 100
      full_scan_threshold: 10000
    # Optimized for textbook search
    optimizers_config:
      deleted_threshold: 0.2
      vacuum_min_vector_number: 1000
      default_segment_number: 2
      max_segment_size: 100000
      memmap_threshold: 10000
      indexing_threshold: 20000
      flush_interval_sec: 10
      max_optimization_threads: 1

# Clustering configuration (for production)
clustering:
  enabled: false
  # Change to true in production with multiple nodes
  number_of_shards: 1
  number_of_replicas: 1

# Performance tuning for textbook RAG
tuning:
  # Memory and performance settings
  max_memory_for_search: "1G"
  # Concurrent searches
  max_concurrent_queries: 16
  # Cache settings for frequently accessed vectors
  cache_capacity: "512M"

# API configuration
api:
  # Rate limiting
  rate_limit:
    max_requests_per_second: 100
    max_connections: 1024
  # API key configuration for security
  api_key:
    # In production, set this via environment variable
    env: QDRANT_API_KEY

# Logging configuration
logging:
  level: INFO
  format: json
  # Access logging for monitoring
  access_log:
    enabled: true
    format: json